<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>desc.merge &mdash; XDE_DocPythonAPI 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="XDE_DocPythonAPI 1.0.0 documentation" href="../index.html" />
    <link rel="up" title="desc" href="desc.html" />
    <link rel="prev" title="desc.material" href="material.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="material.html" title="desc.material"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">XDE_DocPythonAPI 1.0.0 documentation</a> &raquo;</li>
          <li><a href="desc.html" accesskey="U">desc</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="desc-merge">
<h1>desc.merge<a class="headerlink" href="#desc-merge" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<span class="target" id="module-desc.merge"></span><dl class="class">
<dt id="desc.merge.desc.merge.MergeCollectionsProcess">
<em class="property">class </em><tt class="descclassname">desc.merge.</tt><tt class="descname">MergeCollectionsProcess</tt><big>(</big><em>__builtin__.object</em><big>)</big><a class="headerlink" href="#desc.merge.desc.merge.MergeCollectionsProcess" title="Permalink to this definition">¶</a></dt>
<dd><p>This class allows to merge collections of named entities such as scene_pb2.Library.meshes or
scene_pb2.Library.materials.
It tries to merge a source collection (for instance src_library.meshes) into a destination collection
(for instance dest_library.meshes).
Ideally, when no name conflict occurs, the result is equivalent to
dest_library.meshes.extend(src_library.meshes).</p>
<p>However, it might happen that elements in the source collection have
the same name as elements that are already present
in the destination collection. In such a case, the user can specify different strategies:</p>
<ol class="arabic simple">
<li>to keep the original element and ignore the one from the source collection (KEEP_DEST),</li>
<li>to replace the original element with the one from the source collection (KEEP_SOURCE),</li>
<li>to import the source element with a new name (RENAME_SOURCE).</li>
</ol>
<p>Note that in the third case, the source element is actually not renamed:
only its copy in the target collection is renamed.
This class is used in three stages:</p>
<ol class="arabic simple">
<li>construction: a first evaluation of the conflicts is performed. No merge is actually done, but a dry run is processed to evaluate what will be the results of the merge process.</li>
<li>conflicts resolution: as long as there are conflicts, the user can call the resolveConflict method with a conflict resolution strategy: for each conflicting name, the user specifies KEEP_SOURCE, KEEP_DEST or (RENAME_SOURCE,new_name) where new_name is a user-defined string. This is still a dry-run: the effects of the user-specified strategy are evaluated and the dry-run progression is updated.</li>
<li>apply: the effects of the merge are actually applied to the destination collection.</li>
</ol>
<p>The effects of a dry run can be cancelled, but the effects of apply cannot.
Cancelling a dry run will bring back the merge process to
the state it had after the last call to apply. If apply has never been called,
the merge state is reseted to the initial state.</p>
<p>Note that this merge process does not handle concurrent access!
Different merge processes involving the same collections and
running in parallel or interlaced manner will cause undefined behavior.</p>
<dl class="method">
<dt id="desc.merge.desc.merge.MergeCollectionsProcess.apply">
<tt class="descname">apply</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#desc.merge.desc.merge.MergeCollectionsProcess.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>This method actually applied the changes to the destination collection. Conflicting elements
are not treated by this method, except the one resolved by the user. Changes made by this method
cannot be undone. Remaining conflicts can be resolved afterwards and then this method can be called again.
Note that elements that have been flagged as &#8220;to ignore&#8221; with the KEEP_DEST flag will be considered as merged,
and their status cannot be changed during the process!</p>
</dd></dl>

<dl class="method">
<dt id="desc.merge.desc.merge.MergeCollectionsProcess.__init__">
<tt class="descname">__init__</tt><big>(</big><em>self</em>, <em>dest</em>, <em>source</em><big>)</big><a class="headerlink" href="#desc.merge.desc.merge.MergeCollectionsProcess.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts a dry run of a merge process. After construction, you will be able to access the
elements that will be added to the target collection by calling the newElements method,
as well of the list of conflicting elements. Applying the merge will ignore all conflicts
and only add those elements whose name did not conflict with names from the target collection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dest</strong> &#8211; is a target collection where to add elements.</li>
<li><strong>source</strong> &#8211; is a source collection to merge into the destination collection.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="desc.merge.desc.merge.MergeCollectionsProcess.conflicts">
<tt class="descname">conflicts</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#desc.merge.desc.merge.MergeCollectionsProcess.conflicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of conflicting elements.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list of conflicting names (strings).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="desc.merge.desc.merge.MergeCollectionsProcess.conflictsResoved">
<tt class="descname">conflictsResoved</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#desc.merge.desc.merge.MergeCollectionsProcess.conflictsResoved" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if all conflicts have been resolved (by one or several calls to the resolveConflicts method).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True if the conflicts method returns an empty list, False otherwise.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="desc.merge.desc.merge.MergeCollectionsProcess.elementsToIgnore">
<tt class="descname">elementsToIgnore</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#desc.merge.desc.merge.MergeCollectionsProcess.elementsToIgnore" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of the conflicting elements that the user chose to ignore (they won&#8217;t be added
to the target collection) using the resolveConflict method with the KEEP_DEST flag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list of strings.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="desc.merge.desc.merge.MergeCollectionsProcess.elementsToOverwrite">
<tt class="descname">elementsToOverwrite</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#desc.merge.desc.merge.MergeCollectionsProcess.elementsToOverwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of the conflicting elements that the user chose to overwrite with the source
collection&#8217;s elements using the resolveConflict method with the KEEP_SOURCE flag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list of strings.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="desc.merge.desc.merge.MergeCollectionsProcess.elementsToRename">
<tt class="descname">elementsToRename</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#desc.merge.desc.merge.MergeCollectionsProcess.elementsToRename" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of cnflicting elements that will be inserted into the target collection
with a new name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list of pairs of strings.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="desc.merge.desc.merge.MergeCollectionsProcess.newElements">
<tt class="descname">newElements</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#desc.merge.desc.merge.MergeCollectionsProcess.newElements" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of elements that will be added to the target collection (those who did
not conflict).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list of strings.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="desc.merge.desc.merge.MergeCollectionsProcess.progression">
<tt class="descname">progression</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#desc.merge.desc.merge.MergeCollectionsProcess.progression" title="Permalink to this definition">¶</a></dt>
<dd><p>The merge process is completed once all elements from the source have been treated by the
apply method. This method returns the percentage of treated elements.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a float between 0. and 100.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="desc.merge.desc.merge.MergeCollectionsProcess.resetDryRun">
<tt class="descname">resetDryRun</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#desc.merge.desc.merge.MergeCollectionsProcess.resetDryRun" title="Permalink to this definition">¶</a></dt>
<dd><p>Brings back the merge process to the state it was after last call to the apply method.
Changes that have been applied cannot be undone. If apply was never called, brings back the merge process
to the state it was after construction.</p>
</dd></dl>

<dl class="method">
<dt id="desc.merge.desc.merge.MergeCollectionsProcess.resolveConflicts">
<tt class="descname">resolveConflicts</tt><big>(</big><em>self</em>, <em>strategy_dict</em><big>)</big><a class="headerlink" href="#desc.merge.desc.merge.MergeCollectionsProcess.resolveConflicts" title="Permalink to this definition">¶</a></dt>
<dd><p>This method allows the user to specify how to handle conflicts, by specifying a strategy for each conflicting
name, using a dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>strategy_dict</strong> &#8211; is a dictionary string-&gt;int or (int,string). The keys of the dict are conflicting names, and the values are either an integer (KEEP_SOURCE or KEEP_DEST) or a pair integer/string (RENAME_SOURCE,new_name), where new_name is the name to use for the source element once it is inserted into the destination collection.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><strong>NameError</strong> &#8211; if the merge will add an element e1 with name &#8220;toto&#8221;, and the user specifies to solve a conflict involving an element e2 with name &#8220;foo&#8221; by renaming e2 &#8220;toto&#8221;, the function will fail without modifying the current merge state (no conflict will be processed, the user has to specify another strategy dictionary).</li>
<li><strong>RuntimeError</strong> &#8211; if the specified strategy is incorrect (unknown resolution flag or format).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><pre>Example strategy dict:
{
    "toto": KEEP_SOURCE, # we overwrite the element with name "toto" in the target collection with the one in the source collection
    "tata": KEEP_DEST,   # we ignore the element with name "tata" from the source collection and keep the one in the target collection untouched.
    "yoyo": (RENAME_SOURCE,"yeye") # the source element named "yoyo" will be added to the target collection. Its copy in the target collection will be renamed "yeye".
}</pre>
</div>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="material.html"
                        title="previous chapter">desc.material</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/desc/merge.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="material.html" title="desc.material"
             >previous</a> |</li>
        <li><a href="../index.html">XDE_DocPythonAPI 1.0.0 documentation</a> &raquo;</li>
          <li><a href="desc.html" >desc</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, XDE-ISIR.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>